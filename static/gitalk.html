<!-- Set from config but allow override -->
{% set disqus = config.extra.disqus %} {% if page and page.meta and page.meta.disqus is string %} {% set disqus = page.meta.disqus
%} {% endif %} {% set copyright = config.extra.copyright %} {% if page and page.meta and page.meta.copyright is string %}
{% set copyright = page.meta.copyright %} {% endif %}

<hr>

<!-- Comments Integration -->
{% if not page.is_homepage and disqus %} {% set pageID = page.title | default("404", true) %}
<h2 id="__comments">{{ lang.t("meta.comments") }}</h2>
<form id="gitalk-form" onsubmit="return false;">
    <div id="gitalk-container"></div>
</form>
<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script src="https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js"></script>
<script>
    const gitalk = new Gitalk({
        clientID: '708ce3b6562eb67f799f',
        clientSecret: 'fa962a493d91e7d25852c1562cf3972825e0767e',
        repo: 'blog_comment',
        owner: 'DF-11A',
        admin: ['4uuu', 'DF-11A'],
        id: md5(location.pathname),      // Ensure uniqueness and length less than 50
        distractionFreeMode: false  // Facebook-like distraction free mode
    })

    gitalk.render('gitalk-container')
</script> {% endif %}
